## Урок 14

### Добавление пагинации в админ-панель

#### models.py
```python
class ArticleAdmin(admin.ModelAdmin):
    ...
    list_per_page = 10
    ...
```

**commit: `Урок 14: добавили пагинацию в админ-панель`**


### Добавление ссылок по другим полям в админ-панели

#### models.py
```python
class ArticleAdmin(admin.ModelAdmin):
    ...
    list_display_links = ('id',)  # запятая в конце нужна, чтобы указать, что это кортеж
    ...
```

**commit: `Урок 14: добавили ссылки по другим полям в админ-панель`**

### Добавление сортировок по полям

#### models.py
```python
class ArticleAdmin(admin.ModelAdmin):
    ...
    ordering = ('-views', 'title')
    ...
```

**commit: `Урок 14: добавили сортировки по полям в админ-панели`**

### Перевод админ-панели

#### models.py
```python
class Category(models.Model):
    name = models.CharField(max_length=255, unique=True)

    class Meta:
        db_table = 'Categories'  # без указания этого параметра, таблица в БД будет называться вида 'news_categorys'
        verbose_name = 'Категория'  # единственное число для отображения в админке
        verbose_name_plural = 'Категории'  # множественное число для отображения в админке
```

#### models.py
```python
class Article(models.Model):
    title = models.CharField(..., verbose_name='Заголовок')
    content = models.TextField(..., verbose_name='Содержание')
    publication_date = models.DateTimeField(...,  verbose_name='Дата публикации')
    views = models.IntegerField(...,  verbose_name='Просмотры')
    category = models.ForeignKey(...,  verbose_name='Категория')
    tags = models.ManyToManyField(...,  verbose_name='Теги')
    slug = models.SlugField(...,  verbose_name='Слаг')
    is_active = models.BooleanField(...,  verbose_name='Активна')
```

#### apps.py
```python
class NewsConfig(AppConfig):
    ...
    verbose_name = 'Статья'
    verbose_name_plural = 'Статьи'
```

**commit: `Урок 14: перевели админ-панель`**

#### добавили поле `status` в модель `Article`

- тип `BooleanField` используется для хранения булевых значений (`True` или `False`).
- параметр `choices` используется для ограничения возможных значений поля и для удобного отображения этих значений в админке Django.
- В данном случае, `choices` задается с помощью `tuple(map(lambda x: (bool(x[0]), x[1]), Status.choices))`.

_нам нужно было ограничить значения поля `status` только двумя возможными состояниями: `True` (Проверено) и `False` (Не проверено).
Для этого используется `BooleanField`, который по своей сути ограничивает значения до двух возможных вариантов._

- `Status.choices` возвращает кортеж кортежей вида `((0, 'Не проверено'), (1, 'Проверено'))`.
- С помощью `map(lambda x: (bool(x[0]), x[1]), Status.choices)` эти значения преобразуются в булевы значения: `((False, 'Не проверено'), (True, 'Проверено'))`.
- Это позволяет использовать `BooleanField` с человеко-читаемыми именами для значений.

**commit: `Урок 14: добавили поле status`**

- добавили в админ. панель поле указывающее на наличие кода в ответе карточки
- добавили в админ. панель дополнительные действия: пометить карточки как проверенные и как не проверенные

**commit: `Урок 14: добавили в админ. панель поле наличие кода и дополнительные действия`**

##### Класс `ArticleCodeFilter`
Наследуется от `SimpleListFilter`, который предоставляет базовую функциональность для создания простых фильтров в админке `Django`.

##### Атрибут `title`
Задает название фильтра, которое будет отображаться в админке. В данном случае, это 'Внутри пауки'.

##### Атрибут `parameter_name`
Задает имя параметра, которое будет использоваться в `URL` для фильтрации. В данном случае, это `has_spiders`.

##### Метод `lookups`
Возвращает кортеж кортежей, где каждый внутренний кортеж состоит из двух элементов: значения параметра и человеко-читаемого названия.
В данном случае, возвращаются два варианта: `('yes', 'Да')` и `('no', 'Нет')`.

##### Метод `queryset`
Принимает запрос `request` и исходный набор данных `queryset`.

В зависимости от значения параметра `has_spiders` (которое можно получить с помощью `self.value()`), фильтрует набор данных.
Если значение параметра `has_spiders` равно `yes`, фильтрует набор данных, чтобы включить только те карточки, в которых поле `content` содержит слово 'пауки'.
Если значение параметра `has_spiders` равно `no`, фильтрует набор данных, чтобы исключить карточки, в которых поле `content` содержит слово 'пауки'.

**commit: `Урок 14: добавили кастомный фильтр по наличию пауков в тексте статьи`**